# RustDesk Enterprise Server Configuration
# 复制此文件为 .env 并修改相应配置

# ================================
# 基础服务配置
# ================================

# 服务器密钥 - 客户端连接时需要此密钥
# 建议使用强随机密钥，至少20位字符
RUSTDESK_KEY=your-super-secret-server-key-change-this-immediately

# JWT密钥 - 用于用户认证令牌签名
# 必须至少32位字符，建议64位
JWT_SECRET=your-jwt-secret-key-at-least-32-characters-long-change-this

# 企业功能开关
RUSTDESK_ENTERPRISE=1

# ================================
# 网络端口配置
# ================================

# 主服务端口 (HBBS)
HBBS_PORT=21115

# 中继服务端口 (HBBR)
HBBR_PORT=21117

# Web管理界面端口
WEB_PORT=21119

# WebSocket端口 (可选)
WS_PORT=21118

# HTTP端口 (如果使用Nginx反向代理)
HTTP_PORT=80

# HTTPS端口 (如果使用SSL)
HTTPS_PORT=443

# ================================
# 域名配置
# ================================

# 服务器域名 (用于SSL证书和客户端配置)
DOMAIN=rustdesk.yourdomain.com

# 是否强制HTTPS
FORCE_HTTPS=false

# ================================
# 数据库配置
# ================================

# 企业版数据库URL
# SQLite (默认，适合中小规模)
ENTERPRISE_DB_URL=sqlite:///data/enterprise.sqlite3

# PostgreSQL (推荐大规模部署)
# ENTERPRISE_DB_URL=postgresql://rustdesk:password@postgres:5432/rustdesk_enterprise

# MySQL (可选)
# ENTERPRISE_DB_URL=mysql://rustdesk:password@mysql:3306/rustdesk_enterprise

# 数据库最大连接数
MAX_DATABASE_CONNECTIONS=10

# 兼容性数据库URL (原版格式)
DATABASE_URL=sqlite:///data/db_v2.sqlite3

# ================================
# PostgreSQL 配置 (如果使用)
# ================================

POSTGRES_USER=rustdesk
POSTGRES_PASSWORD=your-strong-postgres-password-change-this
POSTGRES_DB=rustdesk_enterprise
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# ================================
# Redis 配置 (可选，用于会话缓存)
# ================================

REDIS_URL=redis://redis:6379
REDIS_PASSWORD=your-redis-password

# ================================
# 安全配置
# ================================

# 会话超时时间 (秒)
SESSION_TIMEOUT=28800

# 密码最小长度
MIN_PASSWORD_LENGTH=8

# 登录失败锁定阈值
MAX_LOGIN_ATTEMPTS=5

# 账户锁定时间 (秒)
ACCOUNT_LOCKOUT_DURATION=1800

# IP封锁持续时间 (秒)
IP_BLOCK_DURATION=3600

# 启用双因素认证
ENABLE_2FA=true

# ================================
# 邮件配置 (用于通知和密码重置)
# ================================

# SMTP服务器配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=RustDesk Enterprise <noreply@yourdomain.com>

# 启用邮件通知
ENABLE_EMAIL_NOTIFICATIONS=false

# 邮件通知类型
EMAIL_NOTIFY_LOGIN=false
EMAIL_NOTIFY_SECURITY=true
EMAIL_NOTIFY_SYSTEM=true

# ================================
# 性能配置
# ================================

# 启用硬件加速
ENABLE_HARDWARE_ACCELERATION=true

# 默认视频质量 (1-100)
DEFAULT_VIDEO_QUALITY=70

# 默认帧率
DEFAULT_FRAMERATE=30

# 最大并发连接数
MAX_CONCURRENT_CONNECTIONS=100

# 总带宽限制 (Mbps)
TOTAL_BANDWIDTH_LIMIT=1000

# 单用户带宽限制 (Mbps)
SINGLE_USER_BANDWIDTH_LIMIT=100

# 启用低延迟模式
ENABLE_LOW_LATENCY=false

# ================================
# 文件传输配置
# ================================

# 最大文件大小 (字节)
MAX_FILE_SIZE=1073741824

# 允许的文件类型 (逗号分隔)
ALLOWED_FILE_TYPES=txt,pdf,doc,docx,xls,xlsx,ppt,pptx,zip,rar,7z,jpg,jpeg,png,gif

# 禁止的文件类型 (逗号分隔)
BLOCKED_FILE_TYPES=exe,bat,cmd,scr,com,pif

# 文件传输临时目录
FILE_TRANSFER_TEMP_DIR=/tmp/rustdesk-transfers

# 启用文件传输加密
ENABLE_FILE_ENCRYPTION=true

# ================================
# 监控配置
# ================================

# 启用Prometheus监控
ENABLE_PROMETHEUS=true

# Prometheus端口
PROMETHEUS_PORT=9090

# Grafana管理员密码
GRAFANA_PASSWORD=admin123

# 启用健康检查
ENABLE_HEALTH_CHECK=true

# 健康检查间隔 (秒)
HEALTH_CHECK_INTERVAL=30

# ================================
# 日志配置
# ================================

# 日志级别 (error, warn, info, debug, trace)
RUST_LOG=info

# 日志文件路径
LOG_FILE_PATH=/app/logs/rustdesk.log

# 日志文件最大大小 (MB)
LOG_FILE_MAX_SIZE=100

# 保留日志文件数量
LOG_FILE_RETENTION=30

# 启用审计日志
ENABLE_AUDIT_LOG=true

# ================================
# 备份配置
# ================================

# 启用自动备份
ENABLE_AUTO_BACKUP=true

# 备份间隔 (小时)
BACKUP_INTERVAL=24

# 备份保留天数
BACKUP_RETENTION_DAYS=30

# 备份存储路径
BACKUP_STORAGE_PATH=/app/backups

# ================================
# 开发和调试配置
# ================================

# 开发模式 (生产环境请设为false)
DEBUG_MODE=false

# 启用API文档
ENABLE_API_DOCS=false

# 跨域配置 (开发时可设为*)
CORS_ORIGINS=https://yourdomain.com

# 启用详细错误信息
VERBOSE_ERRORS=false

# ================================
# 集群配置 (高级功能)
# ================================

# 节点ID (集群部署时使用)
NODE_ID=node-1

# 集群发现方式 (static, consul, etcd)
CLUSTER_DISCOVERY=static

# 集群节点列表 (逗号分隔)
CLUSTER_NODES=node-1:21115,node-2:21115,node-3:21115

# ================================
# 第三方集成
# ================================

# LDAP配置 (企业目录集成)
ENABLE_LDAP=false
LDAP_URL=ldap://ldap.yourdomain.com:389
LDAP_BIND_DN=cn=admin,dc=yourdomain,dc=com
LDAP_BIND_PASSWORD=ldap-password
LDAP_USER_BASE=ou=users,dc=yourdomain,dc=com

# OAuth2/OIDC配置 (单点登录)
ENABLE_OAUTH2=false
OAUTH2_CLIENT_ID=your-oauth2-client-id
OAUTH2_CLIENT_SECRET=your-oauth2-client-secret
OAUTH2_ISSUER_URL=https://auth.yourdomain.com

# Webhook配置 (事件通知)
ENABLE_WEBHOOKS=false
WEBHOOK_URL=https://your-webhook-endpoint.com/rustdesk
WEBHOOK_SECRET=your-webhook-secret

# ================================
# 许可证配置
# ================================

# 企业许可证密钥 (如果需要)
LICENSE_KEY=your-enterprise-license-key

# 许可证服务器URL
LICENSE_SERVER_URL=https://license.rustdesk.com

# ================================
# 时区配置
# ================================

# 服务器时区
TZ=Asia/Shanghai

# 日期格式
DATE_FORMAT=YYYY-MM-DD HH:mm:ss

# ================================
# 其他配置
# ================================

# 服务器名称 (显示在客户端)
SERVER_NAME=RustDesk Enterprise Server

# 服务器描述
SERVER_DESCRIPTION=Enterprise Remote Desktop Server

# 管理员联系邮箱
ADMIN_EMAIL=admin@yourdomain.com

# 公司名称
COMPANY_NAME=Your Company Name

# 版权信息
COPYRIGHT=© 2024 Your Company. All rights reserved.