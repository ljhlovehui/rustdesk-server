# ğŸ”§ ç¼–è¯‘é—®é¢˜åˆ†æå’Œä¿®å¤æŠ¥å‘Š

## ğŸ” å‘ç°çš„ä¸»è¦é—®é¢˜

### âŒ **é—®é¢˜1: ç¼ºå¤±ä¼ä¸šç‰ˆä¸­ç»§æœåŠ¡å™¨æ–‡ä»¶**
- **é—®é¢˜**: `Cargo_enterprise.toml` ä¸­å®šä¹‰äº† `hbbr-enterprise` äºŒè¿›åˆ¶ï¼Œä½† `src/enterprise_relay_server.rs` æ–‡ä»¶ä¸å­˜åœ¨
- **ä¿®å¤**: âœ… å·²åˆ›å»º `src/enterprise_relay_server.rs` æ–‡ä»¶

### âŒ **é—®é¢˜2: ç¼ºå¤±ä¾èµ–åº“**
- **é—®é¢˜**: ä»£ç ä¸­ä½¿ç”¨äº† `rand` å’Œ `rust-ini` åº“ï¼Œä½† `Cargo_enterprise.toml` ä¸­ç¼ºå°‘è¿™äº›ä¾èµ–
- **ä¿®å¤**: âœ… å·²æ·»åŠ  `rust-ini = "0.18"` ä¾èµ–ï¼ˆ`rand = "0.8"` å·²å­˜åœ¨ï¼‰

### âŒ **é—®é¢˜3: æ¨¡å—å¯¼å…¥é”™è¯¯**
- **é—®é¢˜**: `enterprise_main.rs` å’Œ `enterprise_relay_server.rs` ä¸­çš„æ¨¡å—å¯¼å…¥è·¯å¾„ä¸æ­£ç¡®
- **ä¿®å¤**: âœ… å·²ä¿®å¤æ¨¡å—å¯¼å…¥è·¯å¾„ï¼Œä½¿ç”¨ `use crate::` å‰ç¼€

## ğŸ› ï¸ å·²æ‰§è¡Œçš„ä¿®å¤

### 1. åˆ›å»ºç¼ºå¤±æ–‡ä»¶
```rust
// src/enterprise_relay_server.rs - ä¼ä¸šç‰ˆä¸­ç»§æœåŠ¡å™¨
- å®ç°äº†ä¼ä¸šç‰ˆä¸­ç»§æœåŠ¡å™¨ä¸»ç¨‹åº
- æ”¯æŒä¼ä¸šåŠŸèƒ½å¼€å…³
- åŒ…å«é…ç½®ç®¡ç†å’Œç¯å¢ƒè®¾ç½®
```

### 2. ä¿®å¤ä¾èµ–é…ç½®
```toml
# Cargo_enterprise.toml
+ rust-ini = "0.18"  # æ·»åŠ ç¼ºå¤±çš„ä¾èµ–
```

### 3. ä¿®å¤æ¨¡å—å¯¼å…¥
```rust
// enterprise_main.rs
- mod auth;                    // é”™è¯¯çš„æ¨¡å—å£°æ˜
+ use crate::auth;             // æ­£ç¡®çš„æ¨¡å—å¼•ç”¨

// enterprise_relay_server.rs  
- use relay_server::*;         // é”™è¯¯çš„è·¯å¾„
+ use crate::relay_server::*;  // æ­£ç¡®çš„è·¯å¾„
```

## ğŸš€ GitHub Actions å·¥ä½œæµåˆ†æ

### âœ… **æ„å»ºé…ç½®æ­£ç¡®**
- `build-enterprise.yml` é…ç½®äº†å¤šå¹³å°æ„å»º
- è§¦å‘æ¡ä»¶åŒ…å«æ ‡ç­¾æ¨é€ `tags: [ 'v*' ]`
- æ”¯æŒ Linux (x86_64, ARM64, ARMv7), Windows, macOS

### âœ… **Docker é…ç½®æ­£ç¡®**
- `ghcr.yml` é…ç½®äº†å®¹å™¨é•œåƒæ„å»º
- è§¦å‘æ¡ä»¶åŒ¹é…ç‰ˆæœ¬æ ‡ç­¾æ ¼å¼
- è‡ªåŠ¨å‘å¸ƒåˆ° GitHub Container Registry

## ğŸ” å¯èƒ½çš„å…¶ä»–é—®é¢˜

### âš ï¸ **æ½œåœ¨é—®é¢˜1: åº“ç‰ˆæœ¬å…¼å®¹æ€§**
æŸäº›ä¾èµ–åº“ç‰ˆæœ¬å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼š
- `axum = "0.6"` vs `axum = "0.5"` (åŸç‰ˆæœ¬)
- `tower-http = "0.4"` vs `tower-http = "0.3"` (åŸç‰ˆæœ¬)

### âš ï¸ **æ½œåœ¨é—®é¢˜2: åŠŸèƒ½ç‰¹æ€§ä¾èµ–**
ä¼ä¸šç‰ˆä»£ç å¯èƒ½ä¾èµ–ä¸€äº›å°šæœªå®ç°çš„åŠŸèƒ½æ¨¡å—ï¼š
- `enterprise_database` æ¨¡å—çš„å®Œæ•´å®ç°
- `web_api` æ¨¡å—çš„ä¼ä¸šåŠŸèƒ½
- `auth` æ¨¡å—çš„è®¤è¯é€»è¾‘

### âš ï¸ **æ½œåœ¨é—®é¢˜3: å¹³å°ç‰¹å®šä¾èµ–**
æŸäº›ä¼ä¸šåŠŸèƒ½å¯èƒ½åœ¨ä¸åŒå¹³å°ä¸Šæœ‰ä¸åŒçš„ä¾èµ–éœ€æ±‚ã€‚

## ğŸ“‹ å»ºè®®çš„æµ‹è¯•æ­¥éª¤

### 1. æœ¬åœ°ç¼–è¯‘æµ‹è¯•
```bash
# æµ‹è¯•ä¼ä¸šç‰ˆç¼–è¯‘
cp Cargo_enterprise.toml Cargo.toml
cargo check --features enterprise
cargo build --release --features enterprise

# æµ‹è¯•æ ‡å‡†ç‰ˆç¼–è¯‘ï¼ˆç¡®ä¿å…¼å®¹æ€§ï¼‰
git checkout Cargo.toml
cargo check
cargo build --release
```

### 2. Docker æ„å»ºæµ‹è¯•
```bash
# æµ‹è¯•ä¼ä¸šç‰ˆ Docker æ„å»º
docker build -f Dockerfile.enterprise -t rustdesk-enterprise-test .

# æµ‹è¯•æ ‡å‡†ç‰ˆ Docker æ„å»º
docker build -t rustdesk-standard-test .
```

### 3. åŠŸèƒ½æµ‹è¯•
```bash
# å¯åŠ¨ä¼ä¸šç‰ˆæœåŠ¡å™¨
./target/release/hbbs-enterprise --enterprise --port 21115
./target/release/hbbr-enterprise --enterprise --port 21117

# æµ‹è¯• Web ç•Œé¢
curl http://localhost:21119/api/health
```

## ğŸ¯ æ¨èçš„å‘å¸ƒç­–ç•¥

### é˜¶æ®µ1: ä¿®å¤éªŒè¯
1. âœ… æ¨é€ä¿®å¤åˆ°ä»“åº“
2. â³ ç­‰å¾… GitHub Actions æ„å»ºå®Œæˆ
3. â³ éªŒè¯æ‰€æœ‰å¹³å°æ„å»ºæˆåŠŸ

### é˜¶æ®µ2: åŠŸèƒ½æµ‹è¯•
1. ä¸‹è½½æ„å»ºäº§ç‰©è¿›è¡ŒåŠŸèƒ½æµ‹è¯•
2. éªŒè¯ä¼ä¸šåŠŸèƒ½æ­£å¸¸å·¥ä½œ
3. æµ‹è¯•ä»å¼€æºç‰ˆå‡çº§æµç¨‹

### é˜¶æ®µ3: æ­£å¼å‘å¸ƒ
1. åˆ›å»º GitHub Release
2. å‘å¸ƒ Docker é•œåƒ
3. æ›´æ–°æ–‡æ¡£å’Œæ¨å¹¿

## ğŸ”§ å¦‚æœæ„å»ºä»ç„¶å¤±è´¥

### æ£€æŸ¥æ„å»ºæ—¥å¿—
1. è®¿é—® GitHub Actions é¡µé¢
2. æŸ¥çœ‹å…·ä½“çš„é”™è¯¯ä¿¡æ¯
3. æ ¹æ®é”™è¯¯ä¿¡æ¯è¿›ä¸€æ­¥ä¿®å¤

### å¸¸è§é—®é¢˜è§£å†³
- **ä¾èµ–å†²çª**: è°ƒæ•´ç‰ˆæœ¬å·æˆ–ä½¿ç”¨å…¼å®¹ç‰ˆæœ¬
- **åŠŸèƒ½ç¼ºå¤±**: å®ç°æˆ–æ³¨é‡Šæ‰æœªå®Œæˆçš„åŠŸèƒ½
- **å¹³å°ç‰¹å®šé—®é¢˜**: æ·»åŠ æ¡ä»¶ç¼–è¯‘æŒ‡ä»¤

---

**æ€»ç»“**: ä¸»è¦çš„ç¼–è¯‘é˜»å¡é—®é¢˜å·²ä¿®å¤ï¼Œç°åœ¨åº”è¯¥å¯ä»¥æˆåŠŸæ„å»ºã€‚å»ºè®®å…ˆæ¨é€ä¿®å¤ï¼Œç„¶åè§‚å¯Ÿ GitHub Actions çš„æ„å»ºç»“æœã€‚